:root{
  --bg:#060a16;
  --panel:rgba(15,23,42,.78);
  --panel-solid:#0f172a;
  --panel-alt:#15213a;
  --border:rgba(147,197,253,.22);
  --text:#e2e8f0;
  --muted:#9db1d5;
  --input-bg:rgba(15,23,42,.82);
  --input-text:#eff6ff;
  --placeholder:#7f95bc;
  --bubble-assistant:linear-gradient(160deg, rgba(30,41,59,.86), rgba(15,23,42,.92));
  --bubble-user:linear-gradient(135deg, rgba(59,130,246,.28), rgba(37,99,235,.44));
  --primary:#60a5fa;
  --primary-600:#3b82f6;
  --ring:rgba(96,165,250,.45);
  --danger:#fb7185;
  --success:#4ade80;
  --shadow-sm:0 4px 15px rgba(2,6,23,.28);
  --shadow-md:0 20px 40px rgba(2,6,23,.36);
}

@media (prefers-color-scheme: light){
  :root{
    --bg:#f3f7ff;
    --panel:rgba(255,255,255,.84);
    --panel-solid:#ffffff;
    --panel-alt:#eef4ff;
    --border:rgba(37,99,235,.17);
    --text:#0f172a;
    --muted:#5e7194;
    --input-bg:#fff;
    --input-text:#0f172a;
    --placeholder:#8aa0c4;
    --bubble-assistant:linear-gradient(170deg, #ffffff, #f4f8ff);
    --bubble-user:linear-gradient(140deg, #dbeafe, #c3dcff);
    --primary:#2563eb;
    --primary-600:#1d4ed8;
    --ring:rgba(37,99,235,.34);
    --shadow-sm:0 8px 22px rgba(15,23,42,.08);
    --shadow-md:0 22px 50px rgba(15,23,42,.12);
  }
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:radial-gradient(circle at 10% -10%, rgba(59,130,246,.24), transparent 45%), var(--bg);
  color:var(--text);
  font:15px/1.6 "Inter", system-ui, -apple-system, sans-serif;
  overflow-x:hidden;
}
.container{max-width:1060px; margin:0 auto; padding:0 20px}

.bg-orb{
  position:fixed;
  width:38vw;
  max-width:560px;
  aspect-ratio:1;
  border-radius:50%;
  filter:blur(45px);
  opacity:.35;
  pointer-events:none;
  z-index:-1;
  animation:float 18s ease-in-out infinite;
}
.bg-orb--one{background:#2563eb; top:-10%; left:-8%}
.bg-orb--two{background:#7c3aed; bottom:-20%; right:-10%; animation-delay:-6s}

.header{
  position:sticky;
  top:0;
  z-index:20;
  backdrop-filter:blur(14px) saturate(130%);
  background:color-mix(in oklab, var(--panel-solid) 76%, transparent);
  border-bottom:1px solid var(--border);
}
.header__inner{display:flex; align-items:center; justify-content:space-between; gap:20px; padding:14px 0}
.header__brand{display:flex; align-items:center; gap:12px}
.logo{
  width:40px; height:40px; border-radius:13px; display:grid; place-items:center;
  background:linear-gradient(160deg, rgba(37,99,235,.2), rgba(96,165,250,.35));
  color:var(--primary); border:1px solid var(--border);
}
.brand{margin:0; font-weight:800; letter-spacing:.2px}
.subtle{margin:0; color:var(--muted); font-size:12px}
.header__actions{display:flex; align-items:center; gap:8px}
.status-pill{
  font-size:12px; font-weight:600; padding:8px 10px; border-radius:999px;
  border:1px solid color-mix(in oklab, var(--success) 65%, var(--border));
  background:color-mix(in oklab, var(--success) 8%, var(--panel-solid));
  color:color-mix(in oklab, var(--success) 82%, white);
}

.surface-elev{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:18px;
  box-shadow:var(--shadow-sm);
  backdrop-filter:blur(10px);
}

.main{display:flex; flex-direction:column; gap:14px; padding:20px 0 28px}
.hero{padding:18px; display:grid; grid-template-columns:1.45fr 1fr; gap:14px; align-items:center}
.hero h2{margin:0; font-size:1.38rem; line-height:1.25}
.hero__copy{margin:.4rem 0 0; color:var(--muted)}
.hero__eyebrow{margin:0 0 4px; text-transform:uppercase; letter-spacing:.11em; font-weight:700; color:var(--primary); font-size:.72rem}
.hero__chips{display:flex; flex-wrap:wrap; gap:8px; justify-content:flex-end}
.chip{
  border:1px solid var(--border); background:color-mix(in oklab, var(--panel-solid) 88%, transparent);
  color:var(--text); border-radius:999px; padding:8px 12px; cursor:pointer; font-size:12px;
  transition:transform .18s ease, border-color .18s ease, background-color .18s ease;
}
.chip:hover{transform:translateY(-1px); border-color:color-mix(in oklab, var(--primary) 70%, var(--border))}

.chat-wrap{position:relative}
.chat{min-height:48vh; max-height:68vh; overflow:auto; padding:16px}
.chat__list{list-style:none; margin:0; padding:0}
.msg{
  display:grid; grid-template-columns:auto 1fr; gap:10px; margin:14px 0;
  opacity:0; transform:translateY(8px); animation:messageIn .28s ease forwards;
}
.msg--user{grid-template-columns:1fr auto}
.avatar{
  width:36px; height:36px; border-radius:11px; display:grid; place-items:center; font-size:12px; font-weight:700;
  border:1px solid var(--border); color:var(--primary);
  background:color-mix(in oklab, var(--primary) 12%, var(--panel-solid));
}
.msg--user .avatar{color:#fff; background:color-mix(in oklab, var(--primary) 55%, var(--panel-solid))}
.bubble{
  max-width:80%; padding:12px 14px; border-radius:15px; border:1px solid var(--border);
  white-space:pre-wrap; word-break:break-word; box-shadow:var(--shadow-sm); position:relative;
}
.msg--assistant .bubble{background:var(--bubble-assistant)}
.msg--user .bubble{margin-left:auto; background:var(--bubble-user)}
.time{margin-top:6px; font-size:11px; color:var(--muted)}
.bubble code{font-size:12px; border:1px solid var(--border); border-radius:6px; padding:1px 5px; background:var(--panel-alt)}
.bubble strong{font-weight:700}

.callout{border-left:4px solid var(--danger); padding-left:10px; margin:6px 0 0}

details.sources summary{cursor:pointer; color:var(--muted); font-size:12px; list-style:none}
details.sources summary::-webkit-details-marker{display:none}
.sources__wrap{margin-top:8px; padding:10px; border-radius:12px; border:1px dashed var(--border); background:var(--panel-alt)}
.sources__wrap pre{margin:0; white-space:pre-wrap; word-break:break-word; font-size:12px}

.skel{
  background:var(--bubble-assistant); border:1px solid var(--border); border-radius:16px; padding:14px;
  position:relative; overflow:hidden;
}
.skel::after{
  content:""; position:absolute; inset:0;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.14), transparent);
  transform:translateX(-100%);
  animation:shimmer 1.4s infinite;
}
.skel .line{height:10px; border-radius:6px; background:color-mix(in oklab, var(--panel-alt) 70%, transparent); margin:8px 0}
.skel .line.short{width:42%}

.composer-wrap{padding:10px; position:sticky; bottom:10px}
.composer{display:flex; gap:10px; align-items:flex-end}
.composer__meta{padding:6px 4px 2px}
.input{
  flex:1; padding:12px 13px; border:1px solid var(--border);
  background:var(--input-bg); color:var(--input-text); border-radius:12px;
  outline:none; resize:none; min-height:46px; max-height:170px;
}
.input::placeholder{color:var(--placeholder)}
.input:focus{box-shadow:0 0 0 3px var(--ring); border-color:transparent}

.btn{
  border:1px solid var(--border); background:var(--panel-solid); color:var(--text); padding:10px 14px;
  border-radius:12px; font-weight:600; cursor:pointer;
  transition:transform .15s ease, background-color .15s ease, box-shadow .15s ease;
}
.btn:hover{transform:translateY(-1px)}
.btn:focus-visible{outline:2px solid transparent; box-shadow:0 0 0 3px var(--ring)}
.btn--primary{background:linear-gradient(150deg, var(--primary), var(--primary-600)); border-color:transparent; color:#fff}
.btn--primary:hover{box-shadow:0 8px 20px color-mix(in oklab, var(--primary) 35%, transparent)}
.btn--icon{display:inline-flex; align-items:center; gap:7px}
.icon-btn{background:transparent; border:0; color:var(--muted); cursor:pointer; font-size:16px}

.jump-bottom{
  position:absolute; right:14px; bottom:14px; border:1px solid var(--border); background:var(--panel-solid);
  color:var(--text); padding:8px 10px; border-radius:999px; font-size:12px;
}
.hidden{display:none !important}

.overlay{position:fixed; inset:0; background:rgba(2,6,23,.62); z-index:30}
.modal{position:fixed; inset:0; display:grid; place-items:center; z-index:31; padding:16px}
.modal__content{width:min(680px, 100%); padding:16px; border-radius:16px; box-shadow:var(--shadow-md); background:var(--panel-solid)}
.modal__header{display:flex; align-items:center; justify-content:space-between}
.grid{display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:10px 0 14px}
.field{display:flex; flex-direction:column; gap:6px; font-size:13px}
.field input,.field select{border:1px solid var(--border); background:var(--input-bg); color:var(--input-text); border-radius:10px; padding:10px; outline:none}
.field input:focus,.field select:focus{box-shadow:0 0 0 3px var(--ring); border-color:transparent}
.modal__actions{display:flex; gap:8px; justify-content:flex-end}

.toast-host{position:fixed; right:16px; bottom:16px; z-index:40; display:flex; flex-direction:column; gap:8px}
.toast{background:var(--panel-solid); border:1px solid var(--border); padding:10px 12px; border-radius:10px; box-shadow:var(--shadow-md)}
.toast--error{border-color:color-mix(in oklab, var(--danger) 60%, var(--border)); color:var(--danger)}

.chat::-webkit-scrollbar{width:10px}
.chat::-webkit-scrollbar-thumb{background:color-mix(in oklab, var(--muted) 26%, transparent); border-radius:8px}

@keyframes shimmer{100%{transform:translateX(100%)}}
@keyframes float{50%{transform:translate3d(0,-18px,0)}}
@keyframes messageIn{to{opacity:1; transform:translateY(0)}}

@media (max-width:820px){
  .hero{grid-template-columns:1fr}
  .hero__chips{justify-content:flex-start}
  .bubble{max-width:90%}
}
@media (max-width:720px){
  .grid{grid-template-columns:1fr}
  .header__inner{flex-direction:column; align-items:flex-start}
}
@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{animation:none !important; transition:none !important; scroll-behavior:auto !important}
}
